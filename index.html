<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Web3 Hello World</title>
		<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.js"></script>

<script type="text/javascript">

	async function ethEnabled() {
		if (window.ethereum) {
			window.web3 = new Web3(window.ethereum);
			let result = await window.ethereum.enable();
			return result;
		}

		alert("Please ensure that you have MetaMask installed, we suggest Chrome or Brave");
		return false;
	}

	function getAccounts(callback) {
    web3.eth.getAccounts((error,result) => {
        if (error) {
            console.log(error);
        } else {
            callback(result);
        }
    });
	}


	ethEnabled();

	getAccounts(function(result) {
		var address = result[0];
		console.log(result[0]);
		document.getElementById('wallet').innerHTML = result[0];
		var balance = web3.eth.getBalance(address).then(function(balance) {document.getElementById('balance').innerHTML = balance;});
	});

</script>

	</head>

	<body>
 <p>Hello world, I am Web3.</p>
 <button onclick="ethEnabled();">Run me!</button>
 <div id="wallet"></div>
 <div id="balance"></div>
	</body>
</html>
